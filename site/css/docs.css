/* ------------------------------------
 * Main layout
 * ------------------------------------ */

main {
  /* Colors */
  --docs-h1-underline-color: var(--color-blue);
  --docs-h2-color: var(--color-navy);
  --docs-h3-color: var(--color-navy);
  --docs-rule-color: #d1d1d1;
  --docs-table-header-background: #e4e4e4;
  --docs-table-header-color: var(--color-navy);

  /* IMPORTANT: If any of the following variables change, one or both of the
     @media query thresholds below need to be updated. */
  --docs-nav-min-width: 14rem;
  --docs-nav-max-width: 1fr;
  --docs-toc-min-width: 5rem;
  --docs-article-min-width: 30rem;
  --docs-article-max-width: 49rem;
  --docs-article-margin-inline: 3rem;
  --docs-margin-block: 2rem;

  display: grid;
  grid-template-columns:
    minmax(var(--docs-nav-min-width), var(--docs-nav-max-width)) minmax(0, var(--docs-article-max-width)) 1fr;
  max-width: none;
  background: var(--color-grey-light);
  padding-block: var(--docs-margin-block);
}

img[alt~='full-width'] {
  width: 100%;
  height: auto;
}

/* ------------------------------------
 * Article
 * ------------------------------------ */

#articleWrapper article {
  max-width: var(--docs-article-max-width);
  margin-right: 2rem;
  padding-block: var(--docs-margin-block);
  padding-inline: var(--docs-article-margin-inline);
  background: var(--color-white);
  box-shadow: 0 0 5px 0 rgb(0 0 0 / 10%);
  scroll-margin-top: var(--header-height);
  font-size: 1rem;
  line-height: 1.5rem;
  color: var(--color-navy);
}

/* ------------------------------------
 * Exit externally link
 * ------------------------------------ */

#edit-page-link {
  height: 24px;
  margin-block-start: 2rem;
  margin-block-end: 1rem;
}

#edit-page-link a {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

#edit-page-link lazy-svg::part(svg) {
  height: 24px;
  width: 24px;
  margin-inline-start: 8px;
}

/* ------------------------------------
 * Body text
 * ------------------------------------ */

article p {
  margin: 1.5em 0;
}

article li {
  /* Slightly more space between list items */
  margin-bottom: 0.8rem;
}

article li>p {
  margin: 0;
}

article>p>img.logo {
  max-width: 30%;
}

/* ------------------------------------
 * Code
 * ------------------------------------ */

/* Inline code */
article code:not([class]) {
  padding: 0.2rem 0.4rem;
  background: var(--color-grey-light);
  font-size: .875rem;
  line-height: 1.5rem;
}

/* Non-highlighted code block */
article pre>code:not([class]) {
  background: none;
  padding: 0;
}

figure {
  /* We put code snippets in figures for improved a11y semantics, but they come
     with default margins. */
  margin: 0;
}

/* ------------------------------------
 * Headings
 * ------------------------------------ */

/* Title */
#articleWrapper article h1 {
  padding: 0 0 2rem 0;
  margin-bottom: 2rem;
  border-bottom: 2px solid var(--color-navy);
  font-size: 2rem;
  line-height: 2.5rem;
  margin-top: 0;
}

/* Each section heading has a wrapper <span> to allow for accessible anchor
    links. */
#articleWrapper .heading {
  display: flex;
  position: relative;
}

.heading>[id] {
  /* Adjust scroll margins of all article headings to account for sticky header.
     Otherwise, we'll scroll headings underneath the header. Add a little bit
     more too, for some extra visual breathing room. */
  scroll-margin-top: calc(var(--header-height) + 1.5em);
  position: relative;
  font-size: inherit;
  margin: 0;
}

/* "#" anchor links that float in the left margin */
.anchor {
  position: absolute;
  left: -1.5rem;
  width: 100%;
  opacity: 0;
  padding-top: 0.2rem;
  padding-bottom: 0.2rem;
  margin-top: -0.2rem;
}

:hover>.anchor,
.anchor:hover,
.anchor:focus {
  opacity: 1;
  color: var(--color-medium-gray);
  text-decoration: none;
}

.heading.h2,
article > h2 {
  font-size: 1.5rem;
  line-height: 1.5rem;
  margin: 0 0 1.328em 0;
  padding: 1.5em 0 0.5em 0;
}

#articleWrapper article h2 {
  color: var(--docs-h2-color);
  font-weight: 600;
}

/* If a page has no introductory content before the first heading, remove the
   section delineation. */
#inlineToc + .heading.h2 {
  border-top: none;
  margin-top: 0;
  padding-top: 0.5rem;
}

.heading.h3,
article > h3 {
  font-size: 1.2rem;
  line-height: 1.5rem;
  margin-top: 1.5rem;
  padding-top: 1rem;
}

article h3 {
  color: var(--docs-h3-color);
  font-weight: 600;
}

article h4 {
  font-size: 0.88889rem;
  color: var(--docs-h4-color);
  margin-top: 1.3rem;
}

/* ------------------------------------
 * Lists
 * ------------------------------------ */

article li {
  padding-inline: 0.5em 10%;
}

/* API parameter lists */
.params {
  display: grid;
  grid-template-columns: minmax(min-content, 12em) 1fr;
  border-top: 1px solid #ccc;
}

.params > * {
  padding: 0.5em 1rem;
  border-bottom: 1px solid #ccc;
}

.params > .paramName {
  margin: 0;
  font-size: 1rem;
  font-weight: 500;
  font-family: var(--playground-code-font-family);
  background: var(--color-grey-light);
  border-right: 1px solid rgb(230, 230, 230);
  color: rgb(37, 37, 37);
}

.params > .paramDetails > :first-of-type {
  margin-top: 0;
}

.params>.paramDetails {
  margin-left: 0;
}

/* ------------------------------------
 * Tables
 * ------------------------------------ */

table {
  border-collapse: collapse;
  border: 1px solid #eaeaea;
}

th {
  color: var(--docs-table-header-color);
  background: var(--docs-table-header-background);
  text-align: left;
  font-weight: 600;
}

tr:nth-child(even) {
  background: #f6f8fa;
}

tr {
  border-bottom: 1px solid #eaeaea;
}

th,
td {
  padding: 0.3em 1rem;
  vertical-align: top;
}

th:empty {
  padding: 1px;
}

.wide-table,
.wide-cell {
  width: 100%;
}

.no-wrap-cell {
  white-space: nowrap;
}

.vcenter-cell {
  vertical-align: middle;
}

table.directory td > p {
  margin: 0;
}

table.directory td code {
  background: transparent;
  font-size: inherit;
  padding: 0;
}

table.directory tr:not(.subheading) td {
  padding: 1em 1rem;
}

table.directory tr.subheading {
  font-weight: bold;
}

/* -----------------------------------
/* Notes and warnings
/* ------------------------------------ */

.alert {
  position: relative;
  margin: 1em 0;
  padding: 1em 1em 1em 3.5rem;
  border: 1px solid #ccc;
}

.alert > p {
  margin: 0;
}

.alert::before {
  position: absolute;
  top: 1.15rem;
  left: 1rem;
}

.alert.alert-info::before {
  content: url(/images/alerts/info.svg);
}

.alert.alert-warning::before {
  content: url(/images/alerts/warning.svg);
}

.alert.alert-labs::before {
  content: url(/images/alerts/labs.svg);
}

.alert-todo {
  display: none;
}

.alert.alert-todo h3 {
  color: red;
}

.pre-release > summary {
  cursor: pointer;
}

/* ------------------------------------
 * Prev/next links
 * ------------------------------------ */

#prevAndNextLinks {
  display: flex;
  justify-content: space-between;
  margin-block-start: 0;
  padding-top: 1.5rem;
  border-top: 1px solid rgb(223, 223, 223);
}

#prevLink,
#nextLink {
  display: grid;
  grid-template-columns: min-content 1fr;
  grid-gap: 0em 1.5rem;
  align-items: center;
  color: black;
  text-decoration: none;
}

#nextLink {
  grid-template-columns: 1fr min-content;
  text-align: right;
}

#prevAndNextLinks > span > a > .arrow {
  grid-row: 1 / 3;
  color: #757575;
}

#nextLink > .arrow {
  grid-column: 2;
}

#prevAndNextLinks > span > a > .direction {
  display: block;
  color: #757575;
  font-size: 15px;
}

#prevAndNextLinks > span > a:hover > .direction {
  color: var(--color-blue);
}

#prevAndNextLinks > span > a:hover > .arrow {
  color: var(--color-blue);
}

#prevAndNextLinks > span > a > .title {
  font-size: 18px;
}

#prevAndNextLinks > span > a:hover > .title {
  color: var(--color-blue);
}

#prevAndNextLinks > span > a:first-of-type {
  margin-right: 2rem;
  text-align: left;
}

/* ------------------------------------
 * LHS nav (desktop)
 * ------------------------------------ */

#docsNavWrapper {
  position: sticky;
  top: calc(var(--header-height) + var(--docs-margin-block));
  margin-bottom: 1.5rem;
  height: calc(100vh - var(--header-height));
  display: flex;
  justify-content: flex-end;
  box-sizing: border-box;
  background: var(--docs-nav-background);
  overflow-y: scroll;
}

/* Page links */
#docsNav a {
  color: inherit;
  font-size: 1.125rem;
  line-height: 1.5rem;
  padding: .5rem;
}

#docsNav a:hover,
#docsNav li.active a {
  background-color: var(--color-white);
}

#docsNavWrapper:hover::-webkit-scrollbar-thumb {
  background: #d6d6d6;
}

/* Labs icon */
#docsNav img.labs {
  width: 1.25rem;
  height: 1.25rem;
  vertical-align: text-bottom;
}

/* ------------------------------------
 * Inline TOC
 * ------------------------------------ */

#inlineToc {
  /* Only visible in narrow layout. */
  display: none;
}

#inlineToc ol {
  list-style: none;
  margin: 0;
  padding: .5rem 1rem;
}

/* ------------------------------------
* RHS TOC
* ------------------------------------ */

#rhsTocWrapper {
  /* For some reason, when the natural DOM order is article > TOC, there is a
  layout flash (easier to see with CPU throttling on). If we switch the
  natural order to TOC > article, then change it here with CSS order, the
  flash goes away. This order is probably better for screen-readers anyway.
  */
  order: 2;
  min-width: var(--docs-toc-min-width);
  padding-bottom: 1rem;
}

#rhsToc {
  padding: 0 1rem 0 0;
  position: sticky;
  top: calc(var(--header-height) + var(--docs-margin-block));
}

/* "Contents" heading */
#rhsToc > h2 {
  font-size: .875rem;
  line-height: 1rem;
  font-weight: 300;
  text-transform: uppercase;
  color: var(--color-navy);
  margin-bottom: 1.5rem;
  margin-top: 0;
}

#rhsToc > h2 > a {
  color: inherit;
}

/* Scroller */
#rhsTocInner {
  overflow-y: auto;
  max-height: calc(100vh - var(--header-height) - 7rem);
  padding: 0 1em 0 0.3rem;
}

/* First level */
#rhsTocInner > div > ol {
  position: relative;
}

  #rhsTocInner > div > ol {
  margin: 0;
  padding: 0;
  position: sticky;
  list-style: none;
  border-left: 1px solid var(--color-white);
}

#rhsTocInner > div > ol > li:not(:first-of-type) {
  /* Space between top-level lists */
  margin-top: 0.2rem;
}

/* Second level */
#rhsTocInner > div > ol > li > ol {
  list-style: none;
  /* We move indentation to the anchors so that we can align the bullet
     consistently to the left, regardless of indentation. */
  padding-left: 0;
}

#rhsTocInner > div > ol > li, 
#rhsTocInner > div > ol > li > ol > li {
  margin-top: .25rem;
}

#rhsTocInner > div > ol > li > a {
  margin-left: 1.5rem;
}

#rhsTocInner > div > ol > li > ol > li > a {
  /* Second level indent */
  margin-left: 2.5rem;
}

#rhsTocInner a {
  display: inline-block;
  font-size: 1.125rem;
  line-height: 1.5rem;
  padding: 0.5rem;
}

#rhsTocInner a.active,
#rhsTocInner a:hover {
  background-color: var(--color-white);
  color: var(--color-navy);
}

/* Active section bullet */
#rhsTocInner a.active::before {
  content: '';
  position: absolute;
  left: -5px;
  width: 0.5rem;
  height: 0.5rem;
  transform: translateY(0.5rem);
  background-color: var(--color-core-blue);
  border-radius: 0.5rem;
}

/* ------------------------------------
 * Narrow layouts
 * ------------------------------------ */

@media (max-width: 1332px) {
  main {
    --docs-article-margin-inline: 2.5rem;
  }

  #rhsTocWrapper {
    display: none;
  }

  article {
    grid-column: 2 / -1;
  }

  #inlineToc {
    display: initial;
  }

  #inlineToc > details {
    margin-bottom: 2rem;
  }

  #inlineToc summary {
    position: relative;
    cursor: pointer;
    padding: 0.2em 0;
  }

  #inlineToc summary::marker {
    display: none;
  }

  details > summary:first-of-type {
    list-style: none;
  }

  #inlineToc h2 {
    display: inline-block;
    padding: 0 0 0 1rem;
    margin: 0;
    font-size: .875rem;
    line-height: 1rem;
    font-weight: 300;
    text-transform: uppercase;
    color: var(--color-blue);
  }

  #inlineToc .marker {
    position: absolute;
    top: .4rem;
    left: 0;
    font-size: 1.5rem;
    line-height: 1rem;
    transition: transform 0.1s ease-in-out;
    transform-origin: center;
  }

  #inlineToc > details[open] {
    border-bottom: 1px solid var(--docs-rule-color);
    padding-bottom: 1rem;
  }

  #inlineToc > details[open] .marker {
    transform: rotate(90deg);
  }

  #inlineToc div {
    font-size: 0.9rem;
  }

  #inlineToc li {
    margin-bottom: 0;
    padding-inline: initial;
  }
    #inlineToc li > a {
      display: inline-block;
      font-size: 1.125rem;
      line-height: 1.5rem;
      padding: 0.5rem 0;
    }
    #inlineToc li > a:active,
    #inlineToc li > a:focus {
      background-color: var(--color-grey-light);
      color: var(--color-navy);
    }
}

@media (max-width: 864px) {
  main {
    /* Remove grid */
    display: block;
    padding-top: 0;
  }

  #docsNavWrapper {
    display: none;
  }

  article {
    margin: auto;
    --docs-article-margin-inline: 1.5rem;
  }
    
  #articleWrapper article {
    margin-right: 0;
  }

  .anchor {
    left: -1.1rem;
  }

  .params {
    display: block;
    border: none;
  }

  .params > * {
    border: none;
    background: transparent !important;
  }

  .params > .paramName {
    font-weight: 600;
  }
}

.centered-image {
  display: block;
  margin: auto;
}